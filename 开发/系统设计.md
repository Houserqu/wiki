# 系统设计

## 领域驱动设计

### [《领域驱动设计》](https://book.douban.com/subject/26819666/) 总结

#### 使用领域驱动设计的步骤

1. 收集和理解该领域的知识，统一概念和术语。
2. 利用**模型元素**将系统的各个部分进行定义。可以借助 UML 图进行表达。
3. 结合**聚合模式**，划分各个实体的边界。
4. 将实体归纳到不同的模块中。
5. 结合工厂模式、Repository 模式和分层原则，进行开发。

![领域驱动设计](http://qiniu.houserqu.com/%E9%A2%86%E5%9F%9F%E9%A9%B1%E5%8A%A8%E8%AE%BE%E8%AE%A1.jpeg)

#### 一些要点

##### 分层

- 领域相关的代码都应该放在领域层中，应用层不应该包含领域知识。
- 领域层不应该再进行过多的分层，即使分层，各层文件也应该放在一个模块目录中便于管理。

##### 模式

- **聚合模式**是确定一个**根实体**，将与根实体紧密关联的实体聚合在一起，得到一个聚合对象，对关联实体的操作，都必须通过聚合对象提供的方法。
- **工厂模式**是为了将聚合对象的复杂创建过程独立出来，并处理聚合对象中各个实体的固定规则。
- Repository （存储库）是处理数据存储结构（DB）与对象的映射（类似于 ORM 库中的 Model）。