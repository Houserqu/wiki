# 整洁代码 Clean Code

## 命名

- 用英文单词，而不是拼音
- 对象、类通常用名词，方法用动词或者动词+名词
- 不要有歧义，要让人一眼知道变量的意义，可以通过前缀增加语境（例如 examScore、gameScore）

## 函数

- 尽量使用纯函数（无副作用）
- 只做一件事，尽可能短小，不要超过 300 行
- 编写函数的时候，就思考如何写单元测试，不可被测试的代码不是好代码
- 使用卫语句（提前 if 判断和 return）减少 if/else 嵌套
- 抽离try/catch，不要试图用一个 try/catch 捕获所有错误，而是应该放到独立的函数中去 try/catch
- 函数参数尽可能少，复杂参数用对象
- 函数根据逻辑进行分层，每个函数一个层级，并调用下一个层级函数
- 避免编写重复代码（DRY 原则）

## 注释

- 好的代码是自说明的
- 不要编写冗余的注释
- 注释跟代码一样，需要及时更新

## 格式

- 每个项目代码风格要一致
- 可以使用自动格式化工具去统一风格

## 错误处理

- 不需要判断错误的情况：建议使用异常来代替返回码，这样可以省去编写很多判断代码
- 需要判断错误的情况（多种成功返回值）：可以用返回码来处理

## 第三方代码

- 最好给第三方接口编写单元测试，以保证版本变化不影响功能
- 避免代码各处直接引用第三方接口，最好进行一次封装，便于自己理解，以及以后替换成其他实现时改动更小

## 单元测试

- 单元测试跟业务代码一样重要，甚至需要先于业务代码开发
- 编写单元测试虽然需要占用时间，但是后期重构的时候，反而能节省自测时间
- 单元测试应该不依赖运行环境

## 迭代

- 运行所有单元测试
- 消除重复代码
- 代码意图清楚
- 尽可能减少类和方法的数量
- 逐步重构，持续优化
